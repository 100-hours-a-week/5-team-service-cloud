# /etc/systemd/system/doktori-be-blue.service

[Unit]
Description=Doktori Backend Server (Blue)
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/home/ubuntu/app/backend
Environment="JAVA_OPTS=-Xms512m -Xmx2g -XX:+UseG1GC"
EnvironmentFile=/home/ubuntu/app/backend/.env-blue
ExecStart=/usr/bin/java ${JAVA_OPTS} \
    -Dspring.profiles.active=${SPRING_PROFILES_ACTIVE} \
    -jar /home/ubuntu/app/backend/app-blue.jar \
    --server.port=8080
Restart=on-failure
RestartSec=10
StandardOutput=append:/home/ubuntu/app/backend/logs/be-blue.log
StandardError=append:/home/ubuntu/app/backend/logs/be-blue-error.log

[Install]
WantedBy=multi-user.target